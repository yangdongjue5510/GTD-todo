---
description: 작성된 코드의 테스트 코드를 작성한다.
---

## 개요

이 명령어는 Go 언어로 작성된 코드에 대한 포괄적인 테스트 코드를 자동으로 생성합니다. 
현재 프로젝트의 백엔드 소스코드에 구현된 내용에 맞는 테스트를 작성합니다.

## 실행 조건

다음 중 하나 이상의 조건을 만족할 때 실행:
1. 사용자가 직접 `/generateTest` 명령어를 실행할 때
2. 새로운 서비스나 핸들러 코드가 작성된 후
3. 기존 코드에 새로운 메소드가 추가된 후
4. 리팩토링 후 테스트 커버리지 확보가 필요할 때

## 실행 과정

### 1. 테스트 대상 코드 분석
- 현재 프로젝트의 Go 코드 구조 파악
- 각 패키지별 서비스, 핸들러, 모델 식별
- 테스트가 필요한 함수/메소드 목록 작성

### 2. 테스트 코드 생성 규칙

#### 파일명 규칙
- `*_test.go` 형식으로 생성
- 원본 파일과 같은 패키지에 배치
- 예: `service.go` → `service_test.go`

#### 테스트 함수 규칙
```go
func TestFunctionName(t *testing.T) {
    // 테스트 구현
}
```

#### 테스트 유형별 생성
1. **Unit Tests**: 개별 함수/메소드 테스트
2. **Service Tests** : Repository에 대한 의존성이 있는 서비스인 경우에 testify/mock을 활용하여 테스트
3. **Acceptance Tests** : HTTP API나 RPC가 잘 동작하는 지 확인하는 통합 테스트. (DB는 실제 DB와 동일한 DBMS를 Docker Compose로 환경 구성, 테스트 전후로 데이터 정리 필수.)

#### 테스트 태그 관리
- **Acceptance Tests** : acceptance 라는 태그를 포함. 해당 태그를 가진 테스트들은 순차 수행
```go
//go:build acceptance

package thing_test
```
- 그 외 : 별도 태그 없음. 태그 없는 테스트들은 병렬로 수행.

```go
func TestThingService_Create(t *testing.T) {
    t.Parallel() // 병렬 실행
}
```
### 3. 테스트 코드 작성 패턴

모든 테스트는 given, when, then 구조로 작성되어야 함.  
유닛 테스트인 경우 메서드의 모든 분기 및 에러 처리가 테스트 범위에 포함되어야 함.  

### 4. 테스트 실행 및 확인

테스트 코드 생성 후 다음 명령어들을 자동 실행:
```bash
# 모든 테스트 실행
go test ./... && go test -tags=acceptance ./...

# 커버리지 측정 (인수 테스트는 커버리지에 포함되지 않는다.)
go test -cover ./...

# 상세 출력
go test -v ./... && go test -tags=acceptance -v ./...
```

## 성공 기준

1. **코드 커버리지**: 최소 80% 이상
2. **테스트 통과**: 모든 생성된 테스트가 성공적으로 실행
3. **에러 케이스**: 주요 에러 상황들이 모두 테스트됨
4. **도메인 로직**: GTD 워크플로우 관련 비즈니스 로직이 검증됨
5. **HTTP API**: 모든 엔드포인트의 요청/응답이 테스트됨

테스트 코드 생성 완료 후, 실행 결과와 커버리지 리포트를 제공합니다.
